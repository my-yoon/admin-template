{"remainingRequest":"/Users/zzou/Documents/project/2020/brabbit-admin-template/node_modules/babel-loader/lib/index.js!/Users/zzou/Documents/project/2020/brabbit-admin-template/node_modules/ts-loader/index.js??ref--13-2!/Users/zzou/Documents/project/2020/brabbit-admin-template/src/helper/authentication.ts","dependencies":[{"path":"/Users/zzou/Documents/project/2020/brabbit-admin-template/src/helper/authentication.ts","mtime":1591668793120},{"path":"/Users/zzou/Documents/project/2020/brabbit-admin-template/node_modules/cache-loader/dist/cjs.js","mtime":1582363961748},{"path":"/Users/zzou/Documents/project/2020/brabbit-admin-template/node_modules/babel-loader/lib/index.js","mtime":1585275399303},{"path":"/Users/zzou/Documents/project/2020/brabbit-admin-template/node_modules/ts-loader/index.js","mtime":1585276838680}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3ltYm9sIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3ltYm9sLmRlc2NyaXB0aW9uIjsKaW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUiOwppbXBvcnQgX2FzeW5jVG9HZW5lcmF0b3IgZnJvbSAiL1VzZXJzL3p6b3UvRG9jdW1lbnRzL3Byb2plY3QvMjAyMC9icmFiYml0LWFkbWluLXRlbXBsYXRlL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9hc3luY1RvR2VuZXJhdG9yIjsKaW1wb3J0IFZ1ZSBmcm9tICd2dWUnOwppbXBvcnQgR2xvYmFsU3RhdHVzIGZyb20gJ0Avc3RvcmUvbW9kdWxlcy9nbG9iYWxTdGF0dXMnOwovKioKICog66Gc6re47J24IC0g7JWE7J2065SU66GcIOq2jO2VnCDthqDtgbAg7ZqN65OdCiAqIEBwYXJhbSBpZCDroZzqt7jsnbgg7JWE7J2065SUKOydtOuplOydvCkKICogQHBhcmFtIHBhc3N3b3JkIOuhnOq3uOyduCDruYTrsIDrsojtmLgKICogQHBhcmFtIGNhbGxiYWNrIOumrO2EtCDsvZzrsLEgKCDrpqzthLQ6IOyEseqzteycoOustCwg6rKw6rO8KQogKi8KCnZhciBsb2dpbldpdGhJZCA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7CiAgdmFyIF9yZWYgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoaWQsIHBhc3N3b3JkLCBfY2FsbGJhY2spIHsKICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICB3aGlsZSAoMSkgewogICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgVnVlLnByb3RvdHlwZS4kTG9jYWxTdG9yYWdlLnJlbW92ZUF1dGhUb2tlbigpOwogICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMzsKICAgICAgICAgICAgcmV0dXJuIFZ1ZS5wcm90b3R5cGUuJEFwaS5hdXRoLmdldEF1dGhUb2tlbihpZCwgcGFzc3dvcmQpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgICAgICAgIGlmIChyZXMuZGF0YVsnYWNjZXNzX3Rva2VuJ10pIHsKICAgICAgICAgICAgICAgIC8vIC0tLSBhZGQgdG9rZW4KICAgICAgICAgICAgICAgIFZ1ZS5wcm90b3R5cGUuJExvY2FsU3RvcmFnZS5zZXRBdXRoVG9rZW4ocmVzLmRhdGEuYWNjZXNzX3Rva2VuLCByZXMuZGF0YS5leHBpcmVzX2luKTsKICAgICAgICAgICAgICAgIFZ1ZS5wcm90b3R5cGUuJExvY2FsU3RvcmFnZS5zZXRSZWZyZXNoVG9rZW4ocmVzLmRhdGEucmVmcmVzaF90b2tlbik7CiAgICAgICAgICAgICAgICBHbG9iYWxTdGF0dXMudXBkYXRlSXNMb2dpbih0cnVlKTsKCiAgICAgICAgICAgICAgICBfY2FsbGJhY2sodHJ1ZSwgcmVzKTsKICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgX2NhbGxiYWNrKGZhbHNlLCByZXMuZGF0YS5kZXNjcmlwdGlvbik7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgICAgICAgICBHbG9iYWxTdGF0dXMudXBkYXRlSXNMb2dpbihmYWxzZSk7CgogICAgICAgICAgICAgIF9jYWxsYmFjayhmYWxzZSwgZXJyb3IpOwogICAgICAgICAgICB9KTsKCiAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgIH0KICAgICAgfQogICAgfSwgX2NhbGxlZSk7CiAgfSkpOwoKICByZXR1cm4gZnVuY3Rpb24gbG9naW5XaXRoSWQoX3gsIF94MiwgX3gzKSB7CiAgICByZXR1cm4gX3JlZi5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogIH07Cn0oKTsKLyoqCiAqIOuhnOq3uOyVhOybgwogKi8KCgp2YXIgbG9nb3V0ID0gZnVuY3Rpb24gbG9nb3V0KCkgewogIFZ1ZS5wcm90b3R5cGUuJExvY2FsU3RvcmFnZS5yZW1vdmVBdXRoVG9rZW4oKTsKICBHbG9iYWxTdGF0dXMudXBkYXRlSXNMb2dpbihmYWxzZSk7Cn07Ci8qKgogKiDroZzqt7jsnbggLSBSZWZyZXNoIO2GoO2BsOycvOuhnCDqtoztlZwg7Yag7YGwIO2ajeuTnQogKiBAcGFyYW0gaWQKICogQHBhcmFtIHBhc3N3b3JkCiAqIEBwYXJhbSBfY2FsbGJhY2sKICovCgoKdmFyIGxvZ2luV2l0aFJlZnJlc2hUb2tlbiA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7CiAgdmFyIF9yZWYyID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMihfY2FsbGJhY2spIHsKICAgIHZhciByZWZyZXNoVG9rZW47CiAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTIkKF9jb250ZXh0MikgewogICAgICB3aGlsZSAoMSkgewogICAgICAgIHN3aXRjaCAoX2NvbnRleHQyLnByZXYgPSBfY29udGV4dDIubmV4dCkgewogICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICByZWZyZXNoVG9rZW4gPSBWdWUucHJvdG90eXBlLiRMb2NhbFN0b3JhZ2UucmVmcmVzaFRva2VuKCkgfHwgJyc7CiAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gMzsKICAgICAgICAgICAgcmV0dXJuIFZ1ZS5wcm90b3R5cGUuJEFwaS5hdXRoLmdldEF1dGhUb2tlbldpdGhSZWZyZXNoVG9rZW4ocmVmcmVzaFRva2VuKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgICAgICAvLyAtLS0gYWRkIHRva2VuCiAgICAgICAgICAgICAgVnVlLnByb3RvdHlwZS4kTG9jYWxTdG9yYWdlLnNldEF1dGhUb2tlbihyZXMuZGF0YS5hY2Nlc3NfdG9rZW4pOwogICAgICAgICAgICAgIFZ1ZS5wcm90b3R5cGUuJExvY2FsU3RvcmFnZS5zZXRSZWZyZXNoVG9rZW4ocmVzLmRhdGEucmVmcmVzaF90b2tlbik7CiAgICAgICAgICAgICAgR2xvYmFsU3RhdHVzLnVwZGF0ZUlzTG9naW4odHJ1ZSk7CgogICAgICAgICAgICAgIF9jYWxsYmFjayh0cnVlLCByZXMpOwogICAgICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgICAgICAgICBHbG9iYWxTdGF0dXMudXBkYXRlSXNMb2dpbihmYWxzZSk7CgogICAgICAgICAgICAgIF9jYWxsYmFjayhmYWxzZSwgZXJyb3IpOwogICAgICAgICAgICB9KTsKCiAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLnN0b3AoKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0sIF9jYWxsZWUyKTsKICB9KSk7CgogIHJldHVybiBmdW5jdGlvbiBsb2dpbldpdGhSZWZyZXNoVG9rZW4oX3g0KSB7CiAgICByZXR1cm4gX3JlZjIuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICB9Owp9KCk7CgpleHBvcnQgZGVmYXVsdCB7CiAgbG9naW5XaXRoSWQ6IGxvZ2luV2l0aElkLAogIGxvZ2luV2l0aFJlZnJlc2hUb2tlbjogbG9naW5XaXRoUmVmcmVzaFRva2VuLAogIGxvZ291dDogbG9nb3V0Cn07"},{"version":3,"sources":["/Users/zzou/Documents/project/2020/brabbit-admin-template/src/helper/authentication.ts"],"names":[],"mappings":";;;;AAAA,OAAO,GAAP,MAAgB,KAAhB;AAEA,OAAO,YAAP,MAAyB,8BAAzB;AAGA;;;;;;;AAMA,IAAM,WAAW;AAAA,qEAAG,iBAAO,EAAP,EAAmB,QAAnB,EAAqC,SAArC;AAAA;AAAA;AAAA;AAAA;AAClB,YAAA,GAAG,CAAC,SAAJ,CAAc,aAAd,CAA4B,eAA5B;AADkB;AAAA,mBAEZ,GAAG,CAAC,SAAJ,CAAc,IAAd,CAAmB,IAAnB,CAAwB,YAAxB,CAAqC,EAArC,EAAyC,QAAzC,EAAmD,IAAnD,CAAwD,UAAC,GAAD,EAAuB;AACnF,kBAAG,GAAG,CAAC,IAAJ,CAAS,cAAT,CAAH,EAA6B;AAC3B;AACA,gBAAA,GAAG,CAAC,SAAJ,CAAc,aAAd,CAA4B,YAA5B,CAAyC,GAAG,CAAC,IAAJ,CAAS,YAAlD,EAAgE,GAAG,CAAC,IAAJ,CAAS,UAAzE;AACA,gBAAA,GAAG,CAAC,SAAJ,CAAc,aAAd,CAA4B,eAA5B,CAA4C,GAAG,CAAC,IAAJ,CAAS,aAArD;AACA,gBAAA,YAAY,CAAC,aAAb,CAA2B,IAA3B;;AACA,gBAAA,SAAS,CAAC,IAAD,EAAO,GAAP,CAAT;AACD,eAND,MAMO;AACL,gBAAA,SAAS,CAAC,KAAD,EAAQ,GAAG,CAAC,IAAJ,CAAS,WAAjB,CAAT;AACD;AACF,aAVK,EAUH,KAVG,CAUG,UAAC,KAAD,EAAe;AACtB,cAAA,YAAY,CAAC,aAAb,CAA2B,KAA3B;;AACA,cAAA,SAAS,CAAC,KAAD,EAAQ,KAAR,CAAT;AACD,aAbK,CAFY;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAH;;AAAA,kBAAX,WAAW;AAAA;AAAA;AAAA,GAAjB;AAkBA;;;;;AAGA,IAAM,MAAM,GAAG,SAAT,MAAS,GAAK;AAClB,EAAA,GAAG,CAAC,SAAJ,CAAc,aAAd,CAA4B,eAA5B;AACA,EAAA,YAAY,CAAC,aAAb,CAA2B,KAA3B;AACD,CAHD;AAKA;;;;;;;;AAMA,IAAM,qBAAqB;AAAA,sEAAG,kBAAO,SAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AACxB,YAAA,YADwB,GACD,GAAG,CAAC,SAAJ,CAAc,aAAd,CAA4B,YAA5B,MAA8C,EAD7C;AAAA;AAAA,mBAEtB,GAAG,CAAC,SAAJ,CAAc,IAAd,CAAmB,IAAnB,CAAwB,4BAAxB,CAAqD,YAArD,EAAmE,IAAnE,CAAwE,UAAC,GAAD,EAAuB;AACnG;AACA,cAAA,GAAG,CAAC,SAAJ,CAAc,aAAd,CAA4B,YAA5B,CAAyC,GAAG,CAAC,IAAJ,CAAS,YAAlD;AACA,cAAA,GAAG,CAAC,SAAJ,CAAc,aAAd,CAA4B,eAA5B,CAA4C,GAAG,CAAC,IAAJ,CAAS,aAArD;AACA,cAAA,YAAY,CAAC,aAAb,CAA2B,IAA3B;;AACA,cAAA,SAAS,CAAC,IAAD,EAAO,GAAP,CAAT;AACD,aANK,EAMH,KANG,CAMG,UAAC,KAAD,EAAe;AACtB,cAAA,YAAY,CAAC,aAAb,CAA2B,KAA3B;;AACA,cAAA,SAAS,CAAC,KAAD,EAAQ,KAAR,CAAT;AACD,aATK,CAFsB;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAH;;AAAA,kBAArB,qBAAqB;AAAA;AAAA;AAAA,GAA3B;;AAcA,eAAe;AACb,EAAA,WAAW,EAAX,WADa;AAEb,EAAA,qBAAqB,EAArB,qBAFa;AAGb,EAAA,MAAM,EAAN;AAHa,CAAf","sourcesContent":["import Vue from 'vue'\nimport { AxiosResponse } from 'axios'\nimport GlobalStatus from '@/store/modules/globalStatus'\nimport Response from '@/types/model/Response'\n\n/**\n * 로그인 - 아이디로 권한 토큰 획득\n * @param id 로그인 아이디(이메일)\n * @param password 로그인 비밀번호\n * @param callback 리턴 콜백 ( 리턴: 성공유무, 결과)\n */\nconst loginWithId = async (id: string, password: string, _callback: Function) => {\n  Vue.prototype.$LocalStorage.removeAuthToken()\n  await Vue.prototype.$Api.auth.getAuthToken(id, password).then((res: AxiosResponse) => {\n    if(res.data['access_token']) {\n      // --- add token\n      Vue.prototype.$LocalStorage.setAuthToken(res.data.access_token, res.data.expires_in)\n      Vue.prototype.$LocalStorage.setRefreshToken(res.data.refresh_token)\n      GlobalStatus.updateIsLogin(true)\n      _callback(true, res)\n    } else {\n      _callback(false, res.data.description)\n    }\n  }).catch((error: any) => {\n    GlobalStatus.updateIsLogin(false)\n    _callback(false, error)\n  })\n}\n\n/**\n * 로그아웃\n */\nconst logout = () => {\n  Vue.prototype.$LocalStorage.removeAuthToken()\n  GlobalStatus.updateIsLogin(false)\n}\n\n/**\n * 로그인 - Refresh 토큰으로 권한 토큰 획득\n * @param id\n * @param password\n * @param _callback\n */\nconst loginWithRefreshToken = async (_callback: Function) => {\n  let refreshToken: string = Vue.prototype.$LocalStorage.refreshToken() || ''\n  await Vue.prototype.$Api.auth.getAuthTokenWithRefreshToken(refreshToken).then((res: AxiosResponse) => {\n    // --- add token\n    Vue.prototype.$LocalStorage.setAuthToken(res.data.access_token)\n    Vue.prototype.$LocalStorage.setRefreshToken(res.data.refresh_token)\n    GlobalStatus.updateIsLogin(true)\n    _callback(true, res)\n  }).catch((error: any) => {\n    GlobalStatus.updateIsLogin(false)\n    _callback(false, error)\n  })\n}\n\nexport default {\n  loginWithId,\n  loginWithRefreshToken,\n  logout\n}\n"],"sourceRoot":""}]}